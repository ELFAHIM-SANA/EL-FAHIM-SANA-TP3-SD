-------------------------Rapport tp03-----------------------------

-Création entité Patient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/9185e0c0-63cd-4a92-af35-9c343939480b)

-Création Repository et interface PatientRepository:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/40438b57-6f95-4bb4-98b4-81911f9f706f)

-Création des Patients:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/c5ae0241-ca35-434f-b5f0-2893af80749e)

-Création file html Patient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/99653860-d25e-4808-8404-29aa86893ecb)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/32885a32-25da-41e7-b565-96ecb0f27a4b)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/eabe71ff-badd-4c6e-bbf7-666928f858d7)

-Création application.propreties:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/d243f5aa-b515-42fd-833a-1652b26c7288)

-La base de données:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/17d3921c-468e-468a-bf0c-b828cecb3031)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/471b7ffa-96d5-4d2f-b72a-c2c1afb3152f)

-Configuration web:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/1130412f-8f54-4e3d-a504-a206ebbb28d9)

-Création partie web; PatientController:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/4535eda6-e67b-437f-b849-bb1afc4c691e)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/94acec06-e547-4109-abe6-4258198b7338)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/faf7fa48-72c9-4f73-8609-88c3c0f97f1b)

-Création de la classe SecurityController:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/0ccfa3c8-d835-4c90-931a-d91002730187)

-Création file html Patient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/7666162f-6bbb-478c-be12-c8ac3f04a9e3)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/de28822f-6072-4d75-b0f9-5a3060b44958)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/5c4e4540-33bb-4528-9765-c5efbf6481f6)

-Création file html editPatient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/5bbefae2-4962-40d9-90fa-715cc8dfd508)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/2dfdc25d-0b06-4384-a662-4d2d7961c13a)

-Création formPatient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/d32c62fc-ad8c-4618-adc8-21d49c48d6ba)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/b0dd415f-ab5a-47a9-8012-66689adc0fa2)

-Création file html template1:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/dd8b934f-a704-4ed3-a7e5-16b273c3d8be)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/1e709897-8d7d-45aa-9e44-6a50ef9e30db)

-Création file html lohin :

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/7440fec7-4f78-418e-a594-35ee4aa97da4)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/e51d4257-12ce-453b-bac7-21a2e84314d1)

-Création file html notAutorized:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/777662e3-777a-423a-bd74-61f38dc65f45)

-Les principales dependences:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/770e71e5-1c60-4956-a020-a8fed99671b0)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/afc17e1e-c932-42b9-80c2-9d450ef75c0e)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/d70e7b3e-186e-4234-af89-735ee451f612)

-Les interfaces de l'application:
---Interface Authenification:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/2e263747-50d2-4483-abb9-8d4aa69551fa)

----Interfaces User:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/5fa05932-c185-4c10-a17a-d880160739d9)

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/9192e98c-00f3-49ee-b4ac-9e5b71e98857)

------Interfaces admin:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/f14015f8-c235-4575-af9d-2af2273af643)

-Supprimer patient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/bea25029-6366-4614-941d-f477d3c097ef)

-Ajouter patient:

![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/9eb67cf5-f0ee-4092-9c30-7895f98c9b38)

 -Modifier patient:

 ![image](https://github.com/ELFAHIM-SANA/ELFAHIMSANA03/assets/131165163/ae849066-90d2-4102-84ff-a16aba75bb18)



--------------Partie sécurité-------------------------------

Personnaliser le formulaire d'authentification:

La classe SecurityConfig.java:

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/1b59af9d-8674-4d0d-b104-29198123e4a1)


L'ajout d'un endpoint dans la classe SecurityController.java:


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/c479534b-21fc-4a3c-963d-0c6e93a8606f)


Le fichier login.html:

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/3a7ba3c3-ae0f-4163-ade1-85c9244bf14b)

L'affichage

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/352194d9-1ce4-4b74-93e1-79818ee24a31)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/5426169a-43f7-49f0-82b3-a34b5dfe59b7)


Utilisation des annotations pour protéger les méthodes :

La classe SecurityConfig.java:

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/b1dabbd4-8721-4496-9762-6503405fc1e1)


La classe PatientController.java:

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/ee2f227c-e77e-4cf0-8144-1b74a1159a9d)

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/7dc46807-db19-4bce-bf0a-7bc54c9154c0)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/14b40551-2a0f-48b5-b794-040ba8b6dfac)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/69c258ce-5879-4731-a496-ea43cb064cd8)



![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/12e45152-f101-4993-b4a9-bf0ca53949fd)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/a350e278-c0ba-47ca-860c-8308e5035ca6)


Stockage des utilisateurs dans la base de données:

La classe SecurityConfig.java : méthode pour la gestion des utilisateurs basée sur une base de données relationnelle



![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/16b74788-afa7-4592-af2b-6988082895d3)


Le fichier schema.sql: le script SQL pour créer les tables users et authorities.


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/832344e1-0185-4b36-94c6-71f6488c3e30)

Le fichier data.sql: le script SQL pour créer les utilisateurs .


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/057ff512-cd0a-4fb9-96f7-75c9137096ba)


Le fichier application.propreties :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/adfa57cd-8a45-440e-acee-eac22a1f774e)

Insertion des utilisateurs dans l'application : (On a supprimé le fichier data.sql)

Créer des utilisateurs avec des roles dans la classe HopitalApplication.java : La méthode configure un bean qui 
initialise trois utilisateurs (user11, user22, et admin2) dans la base de données si ces utilisateurs n'existent pas déjà,
avec des rôles et des mots de passe encodés.


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/1e2acf1f-f7ec-4862-a9bc-288d8f83ceda)


La base de données mysql :

La table users :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/472b060b-eeb5-4e0b-88a5-521b1a6042cc)

La table authorities :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/471702ed-db20-45f5-a46b-49cf80673318)

Test : Connexion en tant qu'utilisateur user11:

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/6ae329c3-f9cb-459e-a98c-ef9cba04400b)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/061bf320-2480-43b3-8fcb-09bd52fab408)


Test : Connexion en tant qu'utilisateur admin2:


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/1b0173dd-cc8f-4371-be0e-f50dc9388f2f)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/f8b24e37-6b7f-428f-88cb-b813c77265a7)

UserDetails Service:

On a créé 3 packages dans le package security : entities, repo et service :

Le package entities :

L'entité AppUser :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/76edd3bf-292c-433c-87e4-7004f21fda9e)

L'entité Approle:


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/7597d8cf-8749-40f5-adfc-efdfdb93d247)

Le package repo :

L'interface AppUserRepository :

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/25fa7efc-e235-4387-a172-d69706c6313e)

L'interface AppRoleRepository :

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/82a0682c-6afa-4a50-8138-9d41f55c9810)

Le package service :

L'interface AccountService :

![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/5d7b2f8b-209d-4401-92a4-4624acdc5e63)

La classe AccountServiceImpl :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/2f88093a-8a87-4137-98ff-3299abd33e24)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/05fa9806-fe8b-452a-9239-03612311a428)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/0d7dde0f-3e9c-420d-a54d-7d8e5a42666d)


La classe UserDetailsServiceImpl :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/97f7907f-1691-400a-9721-83afd8b7826e)


Dans la classe SecurityConfig.java on va spécifier le service de gestion des utilisateurs qui sera utilisé par Spring Security
pour récupérer les informations des utilisateurs lors de l'authentification : userDetailsServiceImpl :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/08326c0e-e0fb-4d9f-9673-e30f838b2a69)

Dans la classe HopitalApplication.java on a créé une méthode qui initialise les rôles et les utilisateurs en ajoutant de nouveaux rôles et utilisateurs à l'application, puis en assignant les rôles appropriés aux utilisateurs lorsque l'application démarre :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/19dfd461-26ef-4e3c-9d90-96939d9680ff)


Le teste : Connexion en tant que l'utilisateur "Sanae" et l'utiisateur "admin" :


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/d7dd063f-bf3f-4584-ab8f-edecbe8b76a2)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/af857783-946d-4b37-89ce-8f328b15f616)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/d1b65446-16d5-4e72-a404-8b324508a8fc)


![image](https://github.com/ELFAHIM-SANA/EL-FAHIM-SANA-TP3-SD/assets/131165163/3a5b76fa-9f7c-45e0-80e8-c8b49c7f3b27)










































